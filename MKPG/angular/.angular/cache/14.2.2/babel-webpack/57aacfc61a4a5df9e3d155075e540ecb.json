{"ast":null,"code":"import { FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/customer.service\";\nimport * as i2 from \"../../services/order.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\n\nfunction CheckoutComponent_strong_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\", 19);\n    i0.ɵɵtext(1, \" This field is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CheckoutComponent_strong_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\", 19);\n    i0.ɵɵtext(1, \" This field is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CheckoutComponent_strong_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\", 19);\n    i0.ɵɵtext(1, \" This field is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CheckoutComponent_ng_template_18_strong_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\", 19);\n    i0.ɵɵtext(1, \" This email is not valid \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CheckoutComponent_ng_template_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, CheckoutComponent_ng_template_18_strong_0_Template, 2, 0, \"strong\", 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    i0.ɵɵproperty(\"ngIf\", ((tmp_0_0 = ctx_r4.form.get(\"email\")) == null ? null : tmp_0_0.touched) && ((tmp_0_0 = ctx_r4.form.get(\"email\")) == null ? null : tmp_0_0.hasError(\"email\")));\n  }\n}\n\nfunction CheckoutComponent_strong_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\", 19);\n    i0.ɵɵtext(1, \" This field is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CheckoutComponent_strong_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\", 19);\n    i0.ɵɵtext(1, \" This field is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CheckoutComponent_strong_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\", 19);\n    i0.ɵɵtext(1, \" This field is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CheckoutComponent_strong_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\", 19);\n    i0.ɵɵtext(1, \" This field is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CheckoutComponent_strong_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\", 19);\n    i0.ɵɵtext(1, \" This field is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CheckoutComponent_strong_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\", 19);\n    i0.ɵɵtext(1, \" This field is required \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CheckoutComponent_div_53_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"picture\", 21);\n    i0.ɵɵelement(2, \"img\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 23)(4, \"h4\", 24);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementStart(6, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function CheckoutComponent_div_53_Template_button_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const order_r13 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.deleteItem(order_r13.orderId));\n    });\n    i0.ɵɵtext(7, \"X\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"span\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 26)(11, \"span\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"currency\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const order_r13 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", order_r13.item.itemImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", order_r13.item.itemName, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Quantity: \", order_r13.quantity, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Price: \", i0.ɵɵpipeBind1(13, 4, order_r13.item.price), \"\");\n  }\n}\n\nexport let CheckoutComponent = /*#__PURE__*/(() => {\n  class CheckoutComponent {\n    constructor(customerServer, orderService, router) {\n      this.customerServer = customerServer;\n      this.orderService = orderService;\n      this.router = router;\n      this.total = 0;\n      this.form = new FormGroup({\n        firstName: new FormControl('', [Validators.required]),\n        lastName: new FormControl('', [Validators.required]),\n        email: new FormControl('', [Validators.required]),\n        street: new FormControl('', [Validators.required]),\n        city: new FormControl('', [Validators.required]),\n        state: new FormControl('', [Validators.required]),\n        zipCode: new FormControl('', [Validators.required]),\n        cardNumber: new FormControl('', [Validators.required]),\n        dateExpiration: new FormControl('', [Validators.required])\n      });\n      this.customerServer.getCustomerById(`${localStorage.getItem('MKPG')}`).subscribe({\n        next: data => {\n          this.customer = data;\n          this.form.get('firstName')?.patchValue(`${data.firstName}`);\n          this.form.get('lastName')?.patchValue(`${data.lastName}`);\n          this.form.get('email')?.patchValue(`${data.email}`);\n\n          if (this.customer.address.length > 0) {\n            console.log(this.customer.address[0]);\n            this.form.get('street')?.patchValue(`${this.customer.address[0].street}`);\n            this.form.get('city')?.patchValue(`${this.customer.address[0].city}`);\n            this.form.get('state')?.patchValue(`${this.customer.address[0].state}`);\n            this.form.get('state')?.patchValue(`${this.customer.address[0].state}`);\n            this.form.get('zipCode')?.patchValue(`${this.customer.address[0].zipCode}`);\n          }\n        }\n      });\n    }\n\n    ngOnInit() {\n      this.orderService.myOrders$.subscribe({\n        next: data => {\n          const myOrders = data.filter(order => order.status != \"shipped\");\n          this.orders = myOrders;\n          let total = 0;\n          myOrders.forEach(order => {\n            total += +order.quantity * order.item.price;\n          });\n          this.total = total;\n        }\n      });\n    }\n\n    submit() {\n      if (this.form.valid) {\n        this.orders.forEach(order => {\n          const myOrder = {\n            orderId: order.orderId,\n            quantity: order.quantity,\n            deliveryDate: order.deliveryDate,\n            status: \"shipped\",\n            cart: order.cart,\n            item: order.item\n          };\n          this.orderService.updateOrder(myOrder).subscribe(data => {\n            this.orderService.updateMyOrder(myOrder);\n          });\n        });\n        this.router.navigate(['/thanks']);\n      } else {\n        this.form.markAllAsTouched();\n      }\n    }\n\n    deleteItem(id) {\n      this.orderService.deleteOrder(`${id}`).subscribe({\n        next: _ => {\n          this.orderService.deleteMyOrder(id);\n        }\n      });\n    }\n\n  }\n\n  CheckoutComponent.ɵfac = function CheckoutComponent_Factory(t) {\n    return new (t || CheckoutComponent)(i0.ɵɵdirectiveInject(i1.CustomerService), i0.ɵɵdirectiveInject(i2.OrderService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  CheckoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CheckoutComponent,\n    selectors: [[\"app-checkout\"]],\n    decls: 58,\n    vars: 15,\n    consts: [[1, \"container\"], [1, \"form-container\"], [3, \"formGroup\", \"ngSubmit\"], [\"type\", \"text\", \"placeholder\", \"First Name\", \"formControlName\", \"firstName\", 1, \"input\"], [\"class\", \"error\", 4, \"ngIf\"], [\"type\", \"text\", \"placeholder\", \"Last Name\", \"formControlName\", \"lastName\", 1, \"input\"], [\"type\", \"email\", \"placeholder\", \"Email\", \"formControlName\", \"email\", 1, \"input\"], [\"class\", \"error\", 4, \"ngIf\", \"ngIfElse\"], [\"emailError\", \"\"], [\"type\", \"text\", \"placeholder\", \"Last Name\", \"formControlName\", \"street\", 1, \"input\"], [\"type\", \"text\", \"placeholder\", \"Last Name\", \"formControlName\", \"city\", 1, \"input\"], [\"type\", \"text\", \"placeholder\", \"Last Name\", \"formControlName\", \"state\", 1, \"input\"], [\"type\", \"text\", \"placeholder\", \"Last Name\", \"formControlName\", \"zipCode\", 1, \"input\"], [\"type\", \"text\", \"placeholder\", \"Last Name\", \"formControlName\", \"cardNumber\", 1, \"input\"], [\"type\", \"month\", \"placeholder\", \"Last Name\", \"formControlName\", \"dateExpiration\", \"min\", \"2022-09\", 1, \"input\"], [\"type\", \"submit\", 1, \"btn\"], [1, \"total-container\"], [\"class\", \"item\", 4, \"ngFor\", \"ngForOf\"], [1, \"cart-total\"], [1, \"error\"], [1, \"item\"], [1, \"cart-img\"], [3, \"src\"], [1, \"cart-content\"], [1, \"cart-title\"], [1, \"btn-delete\", 3, \"click\"], [1, \"cart-price\"]],\n    template: function CheckoutComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2);\n        i0.ɵɵlistener(\"ngSubmit\", function CheckoutComponent_Template_form_ngSubmit_2_listener() {\n          return ctx.submit();\n        });\n        i0.ɵɵelementStart(3, \"div\")(4, \"label\");\n        i0.ɵɵtext(5, \"First Name:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"input\", 3);\n        i0.ɵɵtemplate(7, CheckoutComponent_strong_7_Template, 2, 0, \"strong\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\")(9, \"label\");\n        i0.ɵɵtext(10, \"Last Name:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"input\", 5);\n        i0.ɵɵtemplate(12, CheckoutComponent_strong_12_Template, 2, 0, \"strong\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\")(14, \"label\");\n        i0.ɵɵtext(15, \"Email:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"input\", 6);\n        i0.ɵɵtemplate(17, CheckoutComponent_strong_17_Template, 2, 0, \"strong\", 7);\n        i0.ɵɵtemplate(18, CheckoutComponent_ng_template_18_Template, 1, 1, \"ng-template\", null, 8, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\")(21, \"label\");\n        i0.ɵɵtext(22, \"Street:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"input\", 9);\n        i0.ɵɵtemplate(24, CheckoutComponent_strong_24_Template, 2, 0, \"strong\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\")(26, \"label\");\n        i0.ɵɵtext(27, \"City:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(28, \"input\", 10);\n        i0.ɵɵtemplate(29, CheckoutComponent_strong_29_Template, 2, 0, \"strong\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"div\")(31, \"label\");\n        i0.ɵɵtext(32, \"State:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(33, \"input\", 11);\n        i0.ɵɵtemplate(34, CheckoutComponent_strong_34_Template, 2, 0, \"strong\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"div\")(36, \"label\");\n        i0.ɵɵtext(37, \"Zip Code:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(38, \"input\", 12);\n        i0.ɵɵtemplate(39, CheckoutComponent_strong_39_Template, 2, 0, \"strong\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"div\")(41, \"label\");\n        i0.ɵɵtext(42, \"Card Number:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(43, \"input\", 13);\n        i0.ɵɵtemplate(44, CheckoutComponent_strong_44_Template, 2, 0, \"strong\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"div\")(46, \"label\");\n        i0.ɵɵtext(47, \"Date Expiration:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(48, \"input\", 14);\n        i0.ɵɵtemplate(49, CheckoutComponent_strong_49_Template, 2, 0, \"strong\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"button\", 15);\n        i0.ɵɵtext(51, \"Submit\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(52, \"div\", 16);\n        i0.ɵɵtemplate(53, CheckoutComponent_div_53_Template, 14, 6, \"div\", 17);\n        i0.ɵɵelementStart(54, \"div\", 18)(55, \"strong\");\n        i0.ɵɵtext(56);\n        i0.ɵɵpipe(57, \"currency\");\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        const _r3 = i0.ɵɵreference(19);\n\n        let tmp_1_0;\n        let tmp_2_0;\n        let tmp_3_0;\n        let tmp_5_0;\n        let tmp_6_0;\n        let tmp_7_0;\n        let tmp_8_0;\n        let tmp_9_0;\n        let tmp_10_0;\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.form.get(\"firstName\")) == null ? null : tmp_1_0.touched) && ((tmp_1_0 = ctx.form.get(\"firstName\")) == null ? null : tmp_1_0.hasError(\"required\")));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.form.get(\"lastName\")) == null ? null : tmp_2_0.touched) && ((tmp_2_0 = ctx.form.get(\"lastName\")) == null ? null : tmp_2_0.hasError(\"required\")));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.form.get(\"email\")) == null ? null : tmp_3_0.touched) && ((tmp_3_0 = ctx.form.get(\"email\")) == null ? null : tmp_3_0.hasError(\"required\")))(\"ngIfElse\", _r3);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx.form.get(\"street\")) == null ? null : tmp_5_0.touched) && ((tmp_5_0 = ctx.form.get(\"street\")) == null ? null : tmp_5_0.hasError(\"required\")));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = ctx.form.get(\"city\")) == null ? null : tmp_6_0.touched) && ((tmp_6_0 = ctx.form.get(\"city\")) == null ? null : tmp_6_0.hasError(\"required\")));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_7_0 = ctx.form.get(\"state\")) == null ? null : tmp_7_0.touched) && ((tmp_7_0 = ctx.form.get(\"state\")) == null ? null : tmp_7_0.hasError(\"required\")));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_8_0 = ctx.form.get(\"zipCode\")) == null ? null : tmp_8_0.touched) && ((tmp_8_0 = ctx.form.get(\"zipCode\")) == null ? null : tmp_8_0.hasError(\"required\")));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_9_0 = ctx.form.get(\"cardNumber\")) == null ? null : tmp_9_0.touched) && ((tmp_9_0 = ctx.form.get(\"cardNumber\")) == null ? null : tmp_9_0.hasError(\"required\")));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_10_0 = ctx.form.get(\"dateExpiration\")) == null ? null : tmp_10_0.touched) && ((tmp_10_0 = ctx.form.get(\"dateExpiration\")) == null ? null : tmp_10_0.hasError(\"required\")));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.orders);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Total: \", i0.ɵɵpipeBind1(57, 13, ctx.total), \"\");\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.FormGroupDirective, i5.FormControlName, i4.CurrencyPipe],\n    styles: [\".container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.form-container[_ngcontent-%COMP%]{flex-grow:1}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{max-width:40rem}.form-container[_ngcontent-%COMP%]{margin:initial}.total-container[_ngcontent-%COMP%]{width:40rem}img[_ngcontent-%COMP%]{max-width:5rem}.cart-item[_ngcontent-%COMP%]{display:flex}.item[_ngcontent-%COMP%]{display:flex;margin-bottom:1rem}\"]\n  });\n  return CheckoutComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}