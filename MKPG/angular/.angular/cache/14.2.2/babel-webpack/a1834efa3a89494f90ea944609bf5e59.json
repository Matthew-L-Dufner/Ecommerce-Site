{"ast":null,"code":"import { createCartDTO } from \"../../models/cart.model\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/customer.service\";\nimport * as i3 from \"../../services/cart.service\";\nimport * as i4 from \"../../services/item.service\";\nimport * as i5 from \"../../services/order.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"../cart/cart.component\";\n\nconst _c0 = function () {\n  return [\"/item\"];\n};\n\nconst _c1 = function (a0) {\n  return {\n    id: a0\n  };\n};\n\nfunction HeaderComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"picture\");\n    i0.ɵɵelement(2, \"img\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 26)(4, \"div\")(5, \"a\", 27);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_div_18_Template_a_click_5_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.hideSearch());\n    });\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", item_r2.itemImage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(5, _c0))(\"queryParams\", i0.ɵɵpureFunction1(6, _c1, item_r2.itemId));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r2.itemName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r2.category.name);\n  }\n}\n\nfunction HeaderComponent_div_25_ul_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ul\")(1, \"li\", 17);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_div_25_ul_1_Template_li_click_1_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.onClickProfile());\n    });\n    i0.ɵɵtext(2, \"Profile\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"li\", 17);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_div_25_ul_1_Template_li_click_3_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.onClickLogOut());\n    });\n    i0.ɵɵtext(4, \"LogOut\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction HeaderComponent_div_25_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ul\")(1, \"li\", 17);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_div_25_ng_template_2_Template_li_click_1_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.onClickLogin());\n    });\n    i0.ɵɵtext(2, \"Login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"li\", 17);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_div_25_ng_template_2_Template_li_click_3_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.onClickRegister());\n    });\n    i0.ɵɵtext(4, \"Register\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction HeaderComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtemplate(1, HeaderComponent_div_25_ul_1_Template, 5, 0, \"ul\", 29);\n    i0.ɵɵtemplate(2, HeaderComponent_div_25_ng_template_2_Template, 5, 0, \"ng-template\", null, 30, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r6 = i0.ɵɵreference(3);\n\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loggedIn)(\"ngIfElse\", _r6);\n  }\n}\n\nexport let HeaderComponent = /*#__PURE__*/(() => {\n  class HeaderComponent {\n    constructor(_router, customerService, cartService, itemService, orderService) {\n      this._router = _router;\n      this.customerService = customerService;\n      this.cartService = cartService;\n      this.itemService = itemService;\n      this.orderService = orderService;\n      this.searchItem = \"\";\n      this.showSearch = false;\n      this.dropDown = false;\n      this.dropDownCart = false;\n      this.itemArr = [];\n      this.active = 'home';\n      this.items = [];\n      this.totalItems = 0;\n\n      if (localStorage.getItem('MKPG')) {\n        this.loggedIn = true;\n        cartService.getAllCarts().subscribe({\n          next: data => {\n            const cart = data.find(cart => {\n              return cart.customer.customerId == localStorage.getItem('MKPG');\n            });\n            this.cart = cart;\n\n            if (cart) {\n              this.cartService.setCart(cart);\n            } else {\n              const newCart = {\n                total: \"0\",\n                customer: {\n                  customerId: `${localStorage.getItem('MKPG')}`\n                }\n              };\n              this.cartService.createCart(newCart).subscribe({\n                next: data => this.cartService.setCart(data)\n              });\n            }\n          }\n        });\n      } else {\n        this.loggedIn = false;\n      }\n\n      this.router = _router;\n    }\n\n    ngOnInit() {\n      this.customerService.userId$.subscribe(userId => {\n        if (userId) {\n          this.loggedIn = true;\n        } else {\n          this.loggedIn = false;\n        }\n      });\n      this.orderService.myOrders$.subscribe(data => {\n        const ordersInCart = data.filter(order => order.cart.cartId == this.cart.cartId).filter(order => order.status != 'shipped');\n        this.totalItems = ordersInCart.length;\n      });\n    }\n\n    onMouseEnterProfile() {\n      this.dropDown = true;\n    }\n\n    onMouseleaveProfile() {\n      this.dropDown = false;\n    }\n\n    onMouseEnterCart() {\n      this.dropDownCart = true;\n    }\n\n    onMouseleaveCart() {\n      this.dropDownCart = false;\n    }\n\n    onClickLogin() {\n      this.router.navigate(['/login']);\n    }\n\n    onClickRegister() {\n      this.router.navigate(['/register']);\n    }\n\n    onClickProfile() {\n      this.router.navigate(['/profile']);\n    }\n\n    onClickNintendo() {\n      this.router.navigate(['/category/nintendo']);\n    }\n\n    onClickPlayStation() {\n      this.router.navigate(['/category/playstation']);\n    }\n\n    onClickXBox() {\n      this.router.navigate(['/category/xbox']);\n    }\n\n    onClickPC() {\n      this.router.navigate(['/category/pc']);\n    }\n\n    onClickLogOut() {\n      this.customerService.logout();\n    }\n\n    onClickHome() {\n      this.router.navigate(['/home']);\n    }\n\n    toCheckOut() {\n      this.dropDownCart = false;\n      this.router.navigate(['/checkout']);\n    }\n\n    toggleCart() {\n      if (this.dropDownCart === false) {\n        this.dropDownCart = true;\n      } else {\n        this.dropDownCart = false;\n      }\n    }\n\n    onClickShowSearch() {\n      if (this.showSearch === false) {\n        this.showSearch = true;\n      }\n    }\n\n    hideSearch() {\n      this.showSearch = false;\n      this.searchItem = \"\";\n    }\n\n    getItems() {\n      clearTimeout(this.delayTimer);\n      this.delayTimer = setTimeout(() => {\n        if (this.searchItem.length > 0) {\n          this.itemService.getAllItems().subscribe({\n            next: data => {\n              const items = data.filter(item => item.itemName.search(new RegExp(`${this.searchItem}`)) >= 0);\n              this.itemArr = items;\n              console.log(items);\n            }\n          });\n        }\n      }, 1500);\n    }\n\n    toItemPage(id) {\n      this.router.navigate(['/item']);\n    }\n\n  }\n\n  HeaderComponent.ɵfac = function HeaderComponent_Factory(t) {\n    return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.CustomerService), i0.ɵɵdirectiveInject(i3.CartService), i0.ɵɵdirectiveInject(i4.ItemService), i0.ɵɵdirectiveInject(i5.OrderService));\n  };\n\n  HeaderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HeaderComponent,\n    selectors: [[\"app-header\"]],\n    decls: 39,\n    vars: 15,\n    consts: [[1, \"container\"], [1, \"logo\"], [1, \"item-icon\", 3, \"click\"], [\"src\", \"assets/images/MKPG.jpg\", \"alt\", \"MKPG\", \"height\", \"150\", \"width\", \"150\"], [1, \"menu\"], [1, \"menu-list\"], [1, \"menu-item\", 3, \"click\"], [1, \"search\"], [\"type\", \"text\", \"placeholder\", \"Search...\", 1, \"input\", \"input-search\", 3, \"ngModel\", \"ngModelChange\", \"keyup\", \"click\"], [1, \"search-result\"], [4, \"ngFor\", \"ngForOf\"], [1, \"search-hide\", 3, \"click\"], [1, \"second-menu\"], [1, \"item-icon\", \"item-icon-customer\", 3, \"mouseenter\", \"mouseleave\"], [1, \"bi\", \"bi-person\"], [\"class\", \"dropdown\", 4, \"ngIf\"], [1, \"item-icon\"], [3, \"click\"], [1, \"bi\", \"bi-cart3\"], [1, \"items-total\"], [1, \"dropdown-cart\"], [1, \"cart-title\"], [1, \"btn-close\", 3, \"click\"], [3, \"cart\"], [1, \"btn\", 3, \"click\"], [1, \"search-image\", 3, \"src\"], [1, \"search-result-content\"], [3, \"routerLink\", \"queryParams\", \"click\"], [1, \"dropdown\"], [4, \"ngIf\", \"ngIfElse\"], [\"dropDown2\", \"\"]],\n    template: function HeaderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"header\")(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2);\n        i0.ɵɵlistener(\"click\", function HeaderComponent_Template_div_click_3_listener() {\n          return ctx.onClickHome();\n        });\n        i0.ɵɵelement(4, \"img\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"ul\", 5)(7, \"li\", 6);\n        i0.ɵɵlistener(\"click\", function HeaderComponent_Template_li_click_7_listener() {\n          return ctx.onClickNintendo();\n        });\n        i0.ɵɵtext(8, \"Nintendo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"li\", 6);\n        i0.ɵɵlistener(\"click\", function HeaderComponent_Template_li_click_9_listener() {\n          return ctx.onClickPlayStation();\n        });\n        i0.ɵɵtext(10, \"PlayStation\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"li\", 6);\n        i0.ɵɵlistener(\"click\", function HeaderComponent_Template_li_click_11_listener() {\n          return ctx.onClickXBox();\n        });\n        i0.ɵɵtext(12, \"Xbox\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"li\", 6);\n        i0.ɵɵlistener(\"click\", function HeaderComponent_Template_li_click_13_listener() {\n          return ctx.onClickPC();\n        });\n        i0.ɵɵtext(14, \"PC\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"div\", 7)(16, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function HeaderComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.searchItem = $event;\n        })(\"keyup\", function HeaderComponent_Template_input_keyup_16_listener() {\n          return ctx.getItems();\n        })(\"click\", function HeaderComponent_Template_input_click_16_listener() {\n          return ctx.onClickShowSearch();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 9);\n        i0.ɵɵtemplate(18, HeaderComponent_div_18_Template, 9, 8, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function HeaderComponent_Template_button_click_19_listener() {\n          return ctx.hideSearch();\n        });\n        i0.ɵɵtext(20, \"X\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(21, \"div\", 12)(22, \"ul\", 5)(23, \"li\", 13);\n        i0.ɵɵlistener(\"mouseenter\", function HeaderComponent_Template_li_mouseenter_23_listener() {\n          return ctx.onMouseEnterProfile();\n        })(\"mouseleave\", function HeaderComponent_Template_li_mouseleave_23_listener() {\n          return ctx.onMouseleaveProfile();\n        });\n        i0.ɵɵelement(24, \"i\", 14);\n        i0.ɵɵtemplate(25, HeaderComponent_div_25_Template, 4, 2, \"div\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"li\", 16)(27, \"div\", 17);\n        i0.ɵɵlistener(\"click\", function HeaderComponent_Template_div_click_27_listener() {\n          return ctx.toggleCart();\n        });\n        i0.ɵɵelement(28, \"i\", 18);\n        i0.ɵɵelementStart(29, \"span\", 19);\n        i0.ɵɵtext(30);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(31, \"div\", 20)(32, \"h3\", 21);\n        i0.ɵɵtext(33, \"Cart \");\n        i0.ɵɵelementStart(34, \"button\", 22);\n        i0.ɵɵlistener(\"click\", function HeaderComponent_Template_button_click_34_listener() {\n          return ctx.toggleCart();\n        });\n        i0.ɵɵtext(35, \"X\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(36, \"app-cart\", 23);\n        i0.ɵɵelementStart(37, \"button\", 24);\n        i0.ɵɵlistener(\"click\", function HeaderComponent_Template_button_click_37_listener() {\n          return ctx.toCheckOut();\n        });\n        i0.ɵɵtext(38, \"Check Out\");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"dropdown-open\", ctx.dropDownCart);\n        i0.ɵɵadvance(15);\n        i0.ɵɵclassProp(\"active\", ctx.showSearch);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.searchItem);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"active\", ctx.showSearch);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.itemArr);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"active\", ctx.showSearch);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.dropDown);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.totalItems);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"active\", ctx.dropDownCart);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"cart\", ctx.cart);\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i1.RouterLinkWithHref, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgModel, i8.CartComponent],\n    styles: [\".container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:2rem 0}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:0 10rem}.logo[_ngcontent-%COMP%]{align-items:left;padding-right:0}.menu[_ngcontent-%COMP%]{flex-grow:1}.menu-list[_ngcontent-%COMP%]{list-style:none;display:flex;justify-content:center}.menu-item[_ngcontent-%COMP%]{font-size:36px;padding:1.5rem;font-weight:700;cursor:pointer}.item-icon[_ngcontent-%COMP%]{padding-left:1.5rem;cursor:pointer;font-size:2rem;position:relative}.item-icon-customer[_ngcontent-%COMP%]{font-size:2.4rem}.input-search[_ngcontent-%COMP%]{background-color:var(--color-gray1);border:1px solid transparent;border-radius:5rem;height:4rem;padding:.8rem 1.6rem;width:30rem}.dropdown[_ngcontent-%COMP%]{position:absolute;top:2.7rem;left:-16rem;padding:1.5rem;font-size:1.6rem;border:1px solid var(--color-font);border-radius:3px;cursor:initial;width:20rem;background-color:#fff;color:#0400ff}.dropdown[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{list-style:none}.dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0 1rem;cursor:pointer}.dropdown[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid var(--color-font);padding-bottom:1rem;margin-bottom:1rem}.dropdown-cart[_ngcontent-%COMP%]{position:fixed;top:0;left:65%;bottom:0;right:0;background:#fff;border-left:1px solid var(--color-font);padding:3rem;transition:all ease-out .5s;transform:translate(100%);cursor:initial;z-index:100;overflow-y:auto}.dropdown-cart.active[_ngcontent-%COMP%]{transform:translate(0)}.dropdown-open[_ngcontent-%COMP%]:after{content:\\\"\\\";display:block;position:fixed;top:0;left:0;right:0;bottom:0;background-color:#e6e6e680;z-index:50}.cart-title[_ngcontent-%COMP%]{padding-bottom:1rem;border-bottom:1px solid var(--color-font);margin-bottom:1rem}.search.active[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;background:#fff;left:0;right:0;z-index:100}.search.active[_ngcontent-%COMP%]   .input-search[_ngcontent-%COMP%]{width:60rem;margin:3rem auto;display:block}.search-result[_ngcontent-%COMP%]{display:none;max-width:60rem;margin:auto}.search-result.active[_ngcontent-%COMP%]{display:block}.search-hide[_ngcontent-%COMP%]{display:none;position:absolute;top:3rem;right:4rem;width:4rem;height:4rem;border:0;border-radius:50%;cursor:pointer}.search-hide.active[_ngcontent-%COMP%]{display:block}.search-image[_ngcontent-%COMP%]{max-width:6rem;margin-right:3rem}.search-result-content[_ngcontent-%COMP%]{font-size:1.3rem;color:#111}.search-result[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;margin-bottom:3rem;align-items:center}.btn-close[_ngcontent-%COMP%]{right:5rem;color:#fff;background:red;border:0;position:absolute;border-radius:50%;width:2rem;height:2rem}span.items-total[_ngcontent-%COMP%]{background-color:#fff;color:#111;width:2rem;height:2rem;display:inline-block;text-align:center;border-radius:50%;font-size:1.4rem;line-height:2rem;position:absolute;left:27px;top:-10px}\"]\n  });\n  return HeaderComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}